$(document).ready(function() {
	$('.menu-opener').on('click', function() {
		event.preventDefault();

		$('body').toggleClass('active-menu');
		$('.header-menu').slideToggle();
	});

	$('.js-tool-opener').on('click', function() {
		event.preventDefault();

		var opener = $(this);
		var parent = opener.parent();
		var box = parent.find('.tool-popup');

		box.toggleClass('active-popup');
	});

	$(window).resize(function() {
		if (window.innerWidth > 1024) {
			$('.header-menu').attr('style', '');
			$('body').removeClass('active-menu');
		}
	});

	$(document).mouseup(function(e) {
		var popup = $(".tool-popup");

		if (e.target != popup[0] && !popup.has(e.target).length) {
			popup.removeClass('active-popup');
		}
	});

	// POPUP
	$('.js-popup-opener').on('click', function() {
		event.preventDefault();

		var box = $(this).parents('.popup-parent').find('.popup-local');
		box.toggleClass('active-popup');
	});

	$(document).mouseup(function(e) {
		var popup = $(".popup-local");

		if (e.target != popup[0] && !popup.has(e.target).length) {
			popup.removeClass('active-popup');
		}
	});

	// Buton CLOSE

	$('.close').on('click', function() {
		event.preventDefault();

		$(this).parents('.popup-local, .tool-popup ').removeClass('active-popup');
	});

	// Buton ADD input 

	$('.add-row .add').on('click', function() {
		event.preventDefault();

		var parent = $(this).parent();
		var repeatBlock = parent.find('.repeat');
		var repeatClone = repeatBlock.clone();
		repeatClone.removeClass('repeat');

		parent.append(repeatClone);
	});

	// TAB

	$('.tab-head a.active').hasClass('style-1') ? $('.tab').addClass('style-1') : $('.tab').removeClass('style-1');

	$('.tab-head a').on('click', function() {
		event.preventDefault();

		$(this).hasClass('style-1') ? $(this).parents('.tab').addClass('style-1') : $(this).parents('.tab').removeClass('style-1');

		$(this).parents('.tab').find('.tab-head a').not($(this)).removeClass('active');
		$(this).addClass('active')

		$(this).parents('.tab').find('.tab-item').removeClass('active');
		var activeTab = $(this).attr('href');
		$('#' + activeTab).addClass('active');
	});

	//  JCF init
	jcf.setOptions('Select', {
		wrapNative: false,
		wrapNativeOnMobile: false,
		fakeDropInBody: false
	});
	jcf.replaceAll();

	// datepicker 
	// $('.datepicker-box').datepicker({
	// 	inline: true,
	// 	altField: '.datepicker-input'
	// });

	// $('.datepicker-input').change(function() {
	// 	$('.datepicker-box').datepicker('setDate', $(this).val());
	// });



	// $('.datepicker-input')
	// 	.focusin(function() {
	// 		$('.datepicker-box').addClass('active')
	// 	})

	// 	$(document).mouseup(function(e) {
	// 		var date = $(".datepicker-box");
	
	// 		if (e.target != date[0] && !date.has(e.target).length) {
	// 			date.removeClass('active');
	// 		}
	// 	});


	$(".datepicker-input").datepicker({ 
		dateFormat: "dd-mm-yy", 
		beforeShow:function(textbox, instance){
			$(this).parent().find('.datepicker-box').append($('#ui-datepicker-div'));
			$(this).parent().find('#ui-datepicker-div').hide();
		} });

});